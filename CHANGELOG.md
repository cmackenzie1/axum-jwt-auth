# Changelog

All notable changes to this project will be documented in this file.

## [0.6.1] - 2025-11-14

### ğŸš€ Features

- **Graceful shutdown**: `RemoteJwksDecoder::initialize()` now returns a `CancellationToken` for graceful shutdown of background refresh tasks
- **Fail-fast initialization**: Removed defensive `ensure_initialized()` in favor of clearer fail-fast error on decode before initialization

### ğŸšœ Refactor

- **Dependency reduction**: Removed `futures`, `derive_builder`, and `async-trait` dependencies (23% reduction)
- **Native async traits**: Migrated to Rust 1.85 native async traits using `Pin<Box<dyn Future>>` and RPITIT
- **Manual builders**: Implemented manual builder patterns for `LocalDecoder` and `RemoteJwksDecoder`
- **Edition 2024**: Updated to Rust edition 2024 with MSRV 1.85

### ğŸ“š Documentation

- Added remote JWKS example to README
- Updated all examples to demonstrate graceful shutdown pattern

## [0.6.0] - 2025-11-14

- [**breaking**] Refactored `Claims<T>` from tuple struct to named struct with public `claims` field for cleaner API
- Added `TokenExtractor` trait for pluggable token extraction strategies
- Added `ExtractorConfig` trait for configuring extractor parameters
- Implemented four built-in extractors:
  - `BearerTokenExtractor` (default): Authorization: Bearer <token>
  - `HeaderTokenExtractor<C>`: Custom HTTP headers
  - `CookieTokenExtractor<C>`: Cookie-based tokens
- Added convenience macros to reduce boilerplate:
  - `define_header_extractor!(Name, "header-name")`
  - `define_cookie_extractor!(Name, "cookie-name")`

## [0.5.1] - 2025-04-03

### ğŸš€ Features

- Prevent indefinite hang in `ensure_initialized`

## [0.5.0] - 2025-02-19

### ğŸš€ Features

- [**breaking**] Add async support and improved initialization for RemoteJwksDecoder
- [**breaking**] Enhance Axum JWT authentication with improved error handling and token extraction

### ğŸšœ Refactor

- Simplify RemoteJwksDecoder initialization with builder methods
- [**breaking**] Enhance LocalDecoder with builder pattern and improved validation
- Improve error handling for RemoteJwksDecoder

### ğŸ“š Documentation

- Make the remote example more realistic

### âš™ï¸ Miscellaneous Tasks

- Remove redundant build step
- Add Makefile, update cliff.toml

## [0.4.0] - 2025-01-26

### ğŸš€ Features

- *(errors)* Improve error handling with thiserror
- *(errors)* Replace eprintln with tracing logs
- Use dashmap for better concurrency
- Add remote JWKS decoder with improved configuration and error handling

### ğŸ“š Documentation

- Add badges to README.md
- Simplify documentation and remove redundant examples
- Update README.md, fix badge links
- Update README.md

### ğŸ§ª Testing

- Add integration test for remote jwks

## [0.3.0] - 2025-01-25

### ğŸ’¼ Other

- Add dependabot
- Update dependabot.yml
- Remove axum::async_trait

### âš™ï¸ Miscellaneous Tasks

- Add git cliff for changelog and releases

## [0.2.0] - 2025-01-02

### ğŸ› Bug Fixes

- Add audience to validator, update examples

### ğŸ§ª Testing

- Add integration test

### âš™ï¸ Miscellaneous Tasks

- Prepare metadata for release
- Prepare metadata for release
- Use rustls-tls

## [0.1.0] - 2023-07-28

### ğŸ› Bug Fixes

- Remove async_trait

### âš™ï¸ Miscellaneous Tasks

- Remove all references of old name

<!-- generated by git-cliff -->
